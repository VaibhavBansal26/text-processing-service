
# ----------------------------
# Server
# ----------------------------
PORT=8000
LOG_LEVEL=INFO

# ----------------------------
# Async processing mode
# ----------------------------
# Set to 1 to enable async queue based processing mode in api.py
ASYNC_MODE=0

# Optional queue tuning (only if your async implementation supports these)
ASYNC_QUEUE_MAXSIZE=1000
ASYNC_WORKER_CONCURRENCY=2

# Backpressure behavior when queue is full
# Suggested values: 429 or 503 depending on how you implemented it
ASYNC_QUEUE_FULL_STATUS_CODE=503

# ----------------------------
# Persistence (SQLite)
# ----------------------------
# Path to SQLite DB file used by SQLitePersistenceStore
SQLITE_PATH=./data/service.db

# Whether persistence is enabled (if your code uses this flag)
PERSISTENCE_ENABLED=1

# ----------------------------
# Distributed mode (Redis) Option D
# ----------------------------
# If set, distributed tests run and distributed manager can be enabled
REDIS_URL=redis://localhost:6379/0

# Key prefix for Redis keys
REDIS_KEY_PREFIX=tps

# Redis timeouts (seconds)
REDIS_SOCKET_TIMEOUT_S=0.2
REDIS_CONNECT_TIMEOUT_S=0.2

# Partition policy when Redis is unavailable:
# fail_closed | fail_open | degraded
REDIS_PARTITION_POLICY=fail_closed

# Only used if REDIS_PARTITION_POLICY=degraded
REDIS_DEGRADED_ALLOW_REQUESTS=50

# Distributed rate limiting (tokens per minute, 1 token = 1 word)
NORMAL_TOKENS_PER_MIN=1000
HIGH_TOKENS_PER_MIN=5000

# Burst capacity (defaults to per minute values if not set)
NORMAL_BURST=1000
HIGH_BURST=5000

# ----------------------------
# Observability
# ----------------------------
# If you added metrics toggles (optional)
METRICS_ENABLED=1

TPS_BASE_URL=http://api:8000


DISTRIBUTED_MODE=1

